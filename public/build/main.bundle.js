!function(t){var e={};function a(r){if(e[r])return e[r].exports;var n=e[r]={i:r,l:!1,exports:{}};return t[r].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=t,a.c=e,a.d=function(t,e,r){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},a.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(a.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)a.d(r,n,function(e){return t[e]}.bind(null,n));return r},a.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="",a(a.s=1)}([function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.drawTemperatureVegetation=function(t){n={top:0,right:0,bottom:30,left:0};var e=["yield","temperature","vegetation"];y.domain(e);var a=[],i={};e.forEach(function(t){i[t]={name:t,values:[]},a.push(i[t])}),t.forEach(function(t,a){t.years.forEach(function(t){e.map(function(e){i[e].values.push({name:e,year:parseInt(t.year),value:+t[e]})})})}),t.forEach(function(t,e){c.domain(t.years.map(function(t){return parseInt(t.year)}))}),h(a),d.domain([0,d3.max(a,function(t){return d3.max(t.values,function(t){return t.y+.1*t.y})})]),v.append("g").attr("class","y axis").call(p),v.append("g").attr("class","x axis").attr("transform","translate(0,"+s+")").call(u);var o=v.selectAll(".series").data(a).enter().append("g").attr("class",function(t,e){return"series series-"+e}),b=$(r).find("svg")[0];g(b,"temperature-gradient-0",[{offset:"0%","stop-color":"#44A484 ","stop-opacity":"0.45"},{offset:"75%","stop-color":"#44A484","stop-opacity":"0.05"}]),g(b,"temperature-gradient-1",[{offset:"0%","stop-color":"#76C6CC","stop-opacity":"0.45"},{offset:"75%","stop-color":"#76C6CC","stop-opacity":"0.05"}]),g(b,"temperature-gradient-2",[{offset:"0%","stop-color":"#E8B251 ","stop-opacity":"0.45"},{offset:"75%","stop-color":"#E8B251","stop-opacity":"0.05"}]),o.append("path").attr("d",function(t){return m(t.values)}).attr("class","streamPath").style("fill",function(t,e){return"url(#temperature-gradient-"+e+")"}),v.selectAll(".seriesPoints").data(a).enter().append("g").attr("class","seriesPoints").selectAll(".point").data(function(t){return t.values}).enter().append("circle").attr("class",function(t,e){return"point point-itm-"+t.name+"-"+e}).attr("cx",function(t){return c(t.year)+c.rangeBand()/2}).attr("cy",function(t){return d(t.y)}).attr("r","5px").style("opacity",0).style("fill",function(t){return y(t.name)}),v.selectAll(".seriesPointsHover").data(a).enter().append("g").attr("class",function(t,e){return"seriesPointsHover seriesPointsHover-"+e}).selectAll(".point-hover").data(function(t){return t.values}).enter().append("circle").attr("class","point-hover").attr("cx",function(t){return c(t.year)+c.rangeBand()/2}).attr("cy",function(t){return d(t.y)}).attr("r","25px").style("opacity",0).style("fill",function(t){return y(t.name)}).on("mouseover",function(t,e){(function(t,e){var a=[];a.clientX=d3.mouse(this)[0],a.clientY=d3.mouse(this)[1];var r='<div id="area-tooltip" style="left: '+(a.clientX+25)+"px; top: "+(a.clientY-50)+'px;">';r+="<span><strong>"+l[t.name]+"</strong></br>"+t.value+"</span>",r+="<span><strong>Year</strong></br>"+t.year+"</span>",r+="</div>",$(".point-itm-"+t.name+"-"+e).css("opacity",1),$("#chart-gradient").append(r)}).call(this,t,e)}).on("mouseout",function(t,e){(function(t,e){$(".point-itm-"+t.name+"-"+e).css("opacity",0),$("#area-tooltip").remove()}).call(this,t,e)}),a.forEach(function(t,e){v.select(".series-"+e).append("path").data([a[e].values]).attr("class","border-line line"+e).attr("d",f).attr("transform","translate("+c.rangeBand()/2+", 0)")})};var r="#chart-gradient",n={top:0,right:15,bottom:30,left:15},i=$(".gradient-wrapper").width()-n.left-n.right,s=.6*i-n.top-n.bottom,o=!1;i<=500&&(o=!0);var l={yield:"Corn Yield",temperature:"Temperature",vegetation:"Vegetation"},c=d3.scale.ordinal().rangeRoundBands([0,i],-1.1),d=(d3.scale.ordinal().rangeRoundBands([0,i],-.7),d3.scale.linear().rangeRound([s,0])),u=d3.svg.axis().scale(c).orient("bottom").tickPadding(12).tickSize(1).tickFormat(function(t){return o?t%3==0?t:void 0:t});o&&u.ticks(1e3);var p=d3.svg.axis().scale(d).orient("left").innerTickSize(-i).outerTickSize(0).tickPadding(10).ticks(5).tickFormat(function(t){return""}),f=d3.svg.line().x(function(t,e){return c(t.year)}).y(function(t){return d(t.value)}),y=d3.scale.ordinal().range(["#2D9280","#5BABB1","#E5B156"]).domain(["yield","temperature","vegetation"]),v=d3.select(r).append("svg").attr("width",i+n.left+n.right).attr("height",s+n.top+n.bottom).append("g").attr("transform","translate("+n.left+","+n.top+")"),h=d3.layout.stack().values(function(t){return t.values}).x(function(t){return c(t.year)+c.rangeBand()/2}).y(function(t){return t.value}),m=d3.svg.area().x(function(t){return c(t.year)+c.rangeBand()/2}).y0(function(t){return d(0)}).y1(function(t){return d(t.y)});function g(t,e,a){var r=t.namespaceURI,n=document.createElementNS(r,"linearGradient");n.setAttribute("id",e),n.setAttribute("x2","0%"),n.setAttribute("y2","100%");for(var i=0;i<a.length;i++){var s=a[i],o=document.createElementNS(r,"stop");for(var l in s)s.hasOwnProperty(l)&&o.setAttribute(l,s[l]);n.appendChild(o)}return(t.querySelector("defs")||t.insertBefore(document.createElementNS(r,"defs"),t.firstChild)).appendChild(n)}$(".temp-veget-btn").on("click",function(){var t=$(this);t.hasClass("active")?(t.removeClass("active"),t.hasClass("btn-icon--corn")&&(d3.selectAll(".series-0").attr("visibility","hidden"),$(".seriesPointsHover-0").css("display","none")),t.hasClass("btn-icon--temperature")&&(d3.selectAll(".series-1").attr("visibility","hidden"),$(".seriesPointsHover-1").css("display","none")),t.hasClass("btn-icon--vegetation")&&(d3.selectAll(".series-2").attr("visibility","hidden"),$(".seriesPointsHover-2").css("display","none"))):(t.addClass("active"),t.hasClass("btn-icon--corn")&&(d3.selectAll(".series-0").attr("visibility","visible"),$(".seriesPointsHover-0").css("display","initial")),t.hasClass("btn-icon--temperature")&&(d3.selectAll(".series-1").attr("visibility","visible"),$(".seriesPointsHover-1").css("display","initial")),t.hasClass("btn-icon--vegetation")&&(d3.selectAll(".series-2").attr("visibility","visible"),$(".seriesPointsHover-2").css("display","initial")))})},function(t,e,a){"use strict";a(2),a(3),a(4),a(5),a(0),a(7),a(8)},function(t,e,a){"use strict";!function(t){var e=t.fn.select2.amd.require("select2/defaults");t.extend(e.defaults,{searchInputPlaceholder:""});var a=t.fn.select2.amd.require("select2/dropdown/search"),r=a.prototype.render;a.prototype.render=function(t){var e=r.apply(this,Array.prototype.slice.apply(arguments));return this.$search.attr("placeholder",this.options.get("searchInputPlaceholder")),e}}(window.jQuery),d3.json("/js/us-data-show.json",function(t,e){for(var a=[],r=e.county,n=(Object.keys(r).forEach(function(t){var e=t.toString(),n=0;n=t<1e4?1:2;var i={name:r[""+t].name,state:e.slice(0,n),originalKey:t};a.push(i)}),$("#searchCounty")),i=[],s=0;s<a.length;s++)i.push({id:a[s].originalKey,text:a[s].name,originalKey:a[s].originalKey});n.select2({placeholder:"Search for a county…",searchInputPlaceholder:"Search for a county…",width:"100%",data:i})})},function(t,e,a){"use strict";var r=a(0),n=a(5);!function(){var t,e,a,i,s,o,l,c,d,u,p,f,y,v,h=d3.select(".tooltip"),m=(h.select("#tooltip-state"),0),g={},b=void 0,x=$(".map-counties-sp").width(),w=.6*x,A={top:10,right:10,bottom:10,left:10},S=(d3.scale.sqrt().range([2,40]),d3.scale.threshold().range(["#FBF0DE","#F7E2BC","#F2CC89","#E9BF77","#DBAB58","#A5E7D1","#8EDAC1","#64C2A2","#3FA885","#20906A"])),k=(d3.format("0,000"),d3.format("3g"),d3.format(".1f"),!1),C=!1,P={year:void 0,zoom:d3.select(null),mode:"NATIONAL",state:void 0,county:void 0};var T=d3.select(".timeseries"),O=10,j=50,B=x-j-20;function F(){P.zoom=d3.select(null),i.selectAll("*").remove(),b.transition().duration(500).ease("exp-out").attr("data-zoom",!1).attr("transform","translate("+A.left+","+A.top+")"),setTimeout(function(){a.selectAll("*").style("visibility","visible"),e.selectAll(".county").style("visibility","visible").style("stroke-width","0.5px")},500),P.mode="NATIONAL",N(void 0)}function E(t,r){if("select"!=r&&d3.event.stopPropagation(),P.zoom.node()!==this){var n=x-A.left-A.right,s=w-A.top-A.bottom;P.zoom=d3.select(this);var l=o.bounds(t),c=l[1][0]-l[0][0],d=l[1][1]-l[0][1],u=(l[0][0]+l[1][0])/2,p=(l[0][1]+l[1][1])/2,f=.8/Math.max(c/n,d/s),y=[n/2-f*u,s/2-f*p];P.zoomScale=f,b.transition().duration(500).attr("data-zoom",!0).attr("transform","translate("+y+")scale("+f+")"),i.selectAll("*").remove(),a.selectAll("*").style("visibility","hidden"),e.selectAll(".county").style("visibility",function(e){return Math.floor(e.id/1e3)===t.id?"visible":"hidden"}).style("stroke-width",1/f+"px"),P.mode="STATE"}else F()}function N(t){P.state=t,J(),void 0===P.state?g.region.html("United States"):v&&g.region.html(v.state[t].name),I(t)}function z(t){P.year=t,W(),J(),g.year.html(t),I()}function _(t){P.county=t,J(),P.county,I()}function I(t){t&&v&&$("#tooltip-state").html(v.state[t].name)}function W(){k&&C&&e.selectAll(".county").style("fill",function(t){return v.county.hasOwnProperty(t.id)&&v.county[t.id].data.hasOwnProperty(P.year)?S(v.county[t.id].data[P.year]):"#fff"})}function J(){var t;if(k&&C&&("NATIONAL"===P.mode?t=P.state?v.state[P.state]:v.national:"STATE"===P.mode&&(t=P.county?v.county[P.county]:v.state[P.state]),void 0!==t)){var e=Object.keys(t.data).map(function(e){return{x:+e,y:t.data[e]}});u.domain(t.yRange),c.select("g.y.axis").call(f),c.selectAll(".line").remove(),c.append("path").attr("class","line").attr("d",y(e)),c.selectAll(".point").remove(),t.data.hasOwnProperty(P.year)&&c.append("circle").attr("class","point selected").attr("r",4).attr("cx",d(P.year)).attr("cy",u(t.data[P.year]))}}d=d3.scale.linear().range([5,B-5]).clamp(!0),u=d3.scale.linear().domain([0,100]).range([59,5]),l=T.append("svg").attr("width",x).attr("height",140).append("g").attr("transform","translate("+j+","+O+")"),(c=l.append("g")).append("rect").attr("class","background").attr("width",B).attr("height",64),f=d3.svg.axis().scale(u).orient("left").ticks(4).tickSize(-B).tickPadding(12).tickFormat(d3.format("s")),c.append("g").attr("class","y axis").call(f),p=d3.svg.axis().scale(d).orient("bottom").tickFormat(function(t){return t}).tickSize(-64).ticks(12).tickPadding(12),c.append("g").attr("class","x axis").attr("transform","translate(0,64)").call(p),y=d3.svg.line().x(function(t){return d(t.x)}).y(function(t){return u(t.y)}),$("#searchCounty").on("select2:select",function(t){var e=$(this).val(),a=Math.floor(e/1e3);$.ajax({type:"GET",data:{id:"WI027"},dataType:"json",contentType:"application/json; charset=utf-8",url:"/api/data/",success:function(t){console.log("data updated"),(0,n.drawFinalScatterplot)(t[0].soil_chemistry),(0,r.drawTemperatureVegetation)(t);var e=JSON.parse($("#predicted-data").val());e.date=2018,e.longitude=t[0].years[0].longitude,e.latitude=t[0].years[0].latitude,e.cropquality=t[0].years[0].cropquality,e.wateravailability=$("#slider-water").val(),e.temperature=$("#round-temperature").find("input").val(),e.vegetation=$("#round-vegetation").find("input").val()/100,e.soilcarbon=$("#slider-carbon").val(),e.soilquality=$("#slider-soil").val();var a=JSON.stringify(e);$("#predicted-data").text(a)}}),F();var i=600;$('[data-zoom="true"]').length>0&&(i=1e3),setTimeout(function(){b.selectAll(".state-id-"+a).attr("data-id",function(t){return E(t,"select"),t.id})},i)}),g.number=d3.select("#label-number"),g.unit=d3.select("#label-unit"),g.region=d3.select("#label-region"),g.year=d3.select("#label-year"),t=d3.select(".loading"),function(){var t=d3.select(".map-counties-sp")[0][0];m=[t.offsetLeft,t.offsetTop];var r=x-A.left-A.right,n=w-A.top-A.bottom,l=d3.select("#map-counties");b=l.append("svg").attr("class","map-background").attr("width",x).attr("height",w).on("click",F).append("g").attr("transform","translate("+A.left+","+A.top+")"),e=b.append("g").attr("class","counties"),a=b.append("g").attr("class","states"),i=b.append("g").attr("class","highlight"),s=d3.geo.albersUsa().scale(x).translate([r/2,n/2]),o=d3.geo.path().projection(s),d3.json("/js/us.json",function(t,r){if(t)throw t;e.selectAll(".county").data(topojson.feature(r,r.objects.counties).features).enter().append("path").attr("class","county").attr("data-county-id",function(t){return t.id}).attr("d",o).on("mouseout",function(){i.selectAll("*").remove(),"STATE"===P.mode&&_(void 0)}).on("mouseover",function(t){v.county.hasOwnProperty(t.id)?(d3.select(this).style("cursor","pointer"),i.append("path").datum(t).attr("class","highlight-outer").attr("d",o).style("stroke-width",4.5/P.zoomScale+"px"),i.append("path").datum(t).attr("class","highlight-inner").attr("d",o).style("stroke-width",1/P.zoomScale+"px"),_(t.id)):d3.select(this).style("cursor","not-allowed")}),a.selectAll(".state").data(topojson.feature(r,r.objects.states).features).enter().append("path").attr("class",function(t){return"state state-id-"+t.id}).attr("d",o).on("mouseout",function(){i.selectAll("*").remove(),"NATIONAL"===P.mode&&N(void 0),h.style("opacity",0)}).on("mouseover",function(t){!function(t){if(C){var e=[0,0],a=(e=d3.mouse(d3.event.currentTarget))[0],r=e[1];h.style("visibility","visible").style("opacity",1).style("margin-top","-50px").style("left",a-m[0]+"px").style("top",r+"px")}}(t.id),v&&v.length>0&&v.state.length>0&&!v.state.hasOwnProperty(t.id)?d3.select(this).style("cursor","not-allowed"):(d3.select(this).style("cursor","pointer"),i.append("path").datum(t).attr("class","highlight-outer").attr("d",o),i.append("path").datum(t).attr("class","highlight-inner").attr("d",o),N(t.id))}).on("click",function(t){d3.event.stopPropagation(),v.state.hasOwnProperty(t.id)&&E(t)}),k=!0})}(),window.setTimeout(function(){C=!1,t.select(".spinner").classed("hidden_elem",!1),t.select(".error").classed("hidden_elem",!0),t.classed("hidden_elem",!1),d3.json("/js/us-data-show.json",function(e,a){if(e)throw e;v=a,S.range(v.metadata.colorRange),S.domain(v.metadata.colorQuantiles),d.domain(v.metadata.yearRange),c.select("g.x.axis").call(p),g.unit.html(v.metadata.unit.toLowerCase()),"STATE"!==P.mode||v.state.hasOwnProperty(P.state)?N(P.state):F(),P.year&&P.year<=v.metadata.yearRange[1]&&P.year>=v.metadata.yearRange[0]?z(P.year):z(v.metadata.yearRange[1]),C=!0,W(),J(),I(),t.classed("hidden_elem",!0)})},1500)}()},function(t,e,a){"use strict";var r=20,n=20,i=30,s=40,o=$("#zoom-bar-chart").width()-s-n,l=120-r-i,c=d3.scale.ordinal().rangeRoundBands([0,o],.1),d=d3.scale.ordinal(),u=d3.scale.linear().range([l,0]),p=d3.svg.axis().scale(c).tickSize(0).orient("bottom"),f=(d3.svg.axis().scale(u).orient("left"),d3.scale.ordinal().range(["#76c6cc","#e8b251","#44a484"])),y=d3.select("#zoom-bar-chart").append("svg").attr("width",o+s+n).attr("height",l+r+i).append("g").attr("transform","translate("+s+","+r+")");d3.json("/api/bar-data.json",function(t,e){var a=e.map(function(t){return t.categorie}),r=e[0].values.map(function(t){return t.rate});c.domain(a),d.domain(r).rangeRoundBands([0,c.rangeBand()]),u.domain([0,d3.max(e,function(t){return d3.max(t.values,function(t){return t.value})})]),y.append("g").attr("class","x axis").attr("transform","translate(0,"+l+")").call(p),y.select(".y").transition().duration(500).delay(1300).style("opacity","1");var n=y.selectAll(".slice").data(e).enter().append("g").attr("class","g").attr("transform",function(t){return"translate("+c(t.categorie)+",0)"});n.selectAll("rect").data(function(t){return t.values}).enter().append("rect").attr("width",d.rangeBand()).attr("x",function(t){return d(t.rate)}).style("fill",function(t){return f(t.rate)}).attr("y",function(t){return u(0)}).attr("height",function(t){return l-u(0)}).on("mouseover",function(t){d3.select(this).style("fill",d3.rgb(f(t.rate)).darker(2))}).attr("rx",2).attr("ry",2).on("mouseout",function(t){d3.select(this).style("fill",f(t.rate))}),n.selectAll("rect").transition().delay(function(t){return 1e3*Math.random()}).duration(1e3).attr("y",function(t){return u(t.value)}).attr("height",function(t){return l-u(t.value)});var i=d3.svg.brush().x(c).on("brush",function(){console.log("Brushed")});y.append("g").attr("class","x brush").call(i).selectAll("rect").attr("y",0).attr("height",l)})},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.drawFinalScatterplot=function(t){console.log(t);var e=document.getElementById("chart-circle-wrapper").offsetWidth<550,a={left:30,top:20,right:20,bottom:30},r=$("#chart-circle-wrapper").width()-a.left-a.right,n=2*r/3,i=d3.select("#chart-circle").append("svg").attr("width",r+a.left+a.right).attr("height",n+a.top+a.bottom).append("g").attr("class","chordWrapper").attr("transform","translate("+a.left+","+a.top+")"),s=.7,o=d3.scale.ordinal().range(["#2e8bc2","#209481","#B6334F"]).domain(["water","carbon","soil_quality"]),l=d3.scale.log().range([0,r]).domain([d3.min(t,function(t){return.9*t.yield}),d3.max(t,function(t){return 1.1*t.yield})]),c=d3.svg.axis().orient("bottom").ticks(2).tickFormat(function(t){return l.tickFormat(e?4:8,function(t){var e=d3.formatPrefix(t);return e.scale(t)+e.symbol})(t)}).scale(l);i.append("g").attr("class","x axis").attr("transform","translate(0,"+n+")").call(c);var d=d3.scale.linear().range([n,0]).domain([d3.min(t,function(t){return.9*t.value}),d3.max(t,function(t){return 1.1*t.value})]).nice(),u=(d3.svg.axis().orient("left").ticks(6).scale(d),d3.scale.sqrt().range([e?1:2,e?10:16]).domain(d3.extent(t,function(t){return t.yield})),d3.geom.voronoi().x(function(t){return l(t.yield)}).y(function(t){return d(t.value)}).clipExtent([[0,0],[r,n]])(t));console.log(u),i.append("defs").attr("class","clipWrapper").selectAll(".clip").data(u).enter().append("clipPath").attr("class","clip").attr("id",function(t){if(t)return"clip-"+t.point.code}).append("path").attr("class","clip-path-circle").attr("d",function(t){if(t)return"M"+t.join(",")+"Z"});i.append("g").attr("class","circleClipWrapper").selectAll(".circle-wrapper").data(t.sort(function(t,e){return e.yield>t.yield})).enter().append("circle").attr("class",function(t,e){return"circle-wrapper circle-type-"+t.type+" "+t.code+" "+("water"!=t.type?"hidden":"")}).attr("visibility",function(t,e){return"water"==t.type?"visible":"hidden"}).attr("clip-path",function(t){return"url(#clip-"+t.code+")"}).style("clip-path",function(t){return"url(#clip-"+t.code+")"}).attr("cx",function(t){return l(t.yield)}).attr("cy",function(t){return d(t.value)}).attr("r",50).on("mouseover",function(t,e){var a=[];a.clientX=d3.mouse(this)[0],a.clientY=d3.mouse(this)[1];var r='<div id="circle-tooltip" style="left: '+(a.clientX+50)+"px; top: "+(a.clientY-20)+'px;">';switch(r+='<span class="soil-chemistry-county"><strong>County</strong></br>'+t.county+"</span>",t.type){case"water":r+='<span class="soil-chemistry-water"><strong>Accessible Water</strong></br>'+Number.parseFloat(t.value).toFixed(1)+"mm</span>";break;case"carbon":r+='<span class="soil-chemistry-carbon""><strong>Carbon</strong></br>'+Number.parseFloat(t.value).toFixed(1)+"</span>";break;case"soil_quality":r+='<span class="soil-chemistry-soil"><strong>Soil</strong></br>'+Number.parseFloat(t.value).toFixed(1)+"</span>"}r+='<span class="soil-chemistry-yield"><strong>Corn Yield</strong></br>'+Number.parseFloat(t.yield).toFixed(1)+"</span>",r+="</div>",$("#chart-circle-wrapper").append(r);var n=d3.selectAll("#chart-circle .countries."+t.code);n.style("fill",function(t){return o(t.type)}),n.style("opacity",1);var i=d3.selectAll("#chart-circle .countries-shadow."+t.code);i.style("fill",function(t){return o(t.type)}),i.style("opacity",.3)}).on("mouseout",function(t,e){$("#circle-tooltip").remove();var a=d3.selectAll("#chart-circle .countries."+t.code);a.style("opacity",s),a.style("fill",function(t){return o(t.type)}),d3.selectAll("#chart-circle .countries-shadow."+t.code).style("opacity",0)});i.append("g").attr("class","circleWrapper").selectAll("countries").data(t.sort(function(t,e){return e.yield>t.yield})).enter().append("circle").attr("class",function(t,e){return"countries circle-type-"+t.type+" "+t.code+" "+("water"!=t.type?"hidden":"")}).attr("cx",function(t){return l(t.yield)}).attr("cy",function(t){return d(t.value)}).attr("r",function(t){return 5}).style("pointer-events","none").style("opacity",s).style("fill",function(t){return o(t.type)}),i.append("g").attr("class","circleWrapperShadow").selectAll("countries").data(t.sort(function(t,e){return e.yield>t.yield})).enter().append("circle").attr("class",function(t,e){return"countries-shadow circle-type-"+t.type+" "+t.code+" "+("water"!=t.type?"hidden":"")}).attr("cx",function(t){return l(t.yield)}).attr("cy",function(t){return d(t.value)}).attr("r",function(t){return 20}).style("pointer-events","none").style("opacity",0).style("fill",function(t){return o(t.type)})},$(".soil-chemistry-btn").on("click",function(){var t=$(this);$(".soil-chemistry-btn").each(function(){$(this).removeClass("active")}),t.addClass("active"),$(".circleClipWrapper circle.circle-wrapper").addClass("hidden"),$(".circleWrapper circle.countries").addClass("hidden"),$(".circleWrapperShadow circle.countries-shadow").addClass("hidden"),$(".circleClipWrapper circle.circle-wrapper.circle-type-"+t.attr("data-type")).removeClass("hidden"),$(".circleWrapper circle.countries.circle-type-"+t.attr("data-type")).removeClass("hidden"),$(".circleWrapperShadow circle.countries-shadow.circle-type-"+t.attr("data-type")).removeClass("hidden")})},,function(t,e,a){"use strict";var r=$("#curve-line-sp"),n=20,i=15,s=30,o=15,l=r.width()-o-i,c=r.height()-n-s,d=[{x:2e3,y:5},{x:2001,y:8},{x:2002,y:13},{x:2002,y:12},{x:2004,y:16},{x:2004,y:21},{x:2006,y:18},{x:2007,y:23},{x:2007,y:24},{x:2009,y:28},{x:2010,y:35},{x:2011,y:30},{x:2012,y:32},{x:2013,y:36},{x:2014,y:40},{x:2015,y:100}],u=d3.scale.linear().domain([d3.min(d,function(t){return t.x}),d3.max(d,function(t){return t.x})]).range([0,l]),p=d3.scale.linear().domain([0,d3.max(d,function(t){return t.y})]).range([c,0]),f=d3.svg.axis().scale(u).orient("bottom").innerTickSize(-c).outerTickSize(0).ticks(5).tickPadding(10).tickFormat(function(t){return t}),y=d3.svg.axis().scale(p).orient("left").innerTickSize(-l).outerTickSize(100).tickPadding(10).ticks(5).tickFormat(function(t){return t}).tickFormat(function(t){return""}),v=d3.svg.line().x(function(t){return u(t.x)}).y(function(t){return p(t.y)}).interpolate("bundle"),h=d3.select("#curve-line").append("svg").attr("width",l+o+i).attr("height",c+n+s).append("g").attr("transform","translate("+o+","+n+")");h.append("g").attr("class","x axis").attr("transform","translate(0,"+c+")").call(f),h.append("g").attr("class","y axis").call(y),h.append("path").data([d]).attr("class","line").attr("d",v)},function(t,e,a){"use strict";function r(t){return t.value+' <span class="tooltip-parameter">°F</span><div class="tooltip-label">Temperature</div>'}function n(t){return t.value/100+'<div class="tooltip-label">Vegetation Level</div>'}$(document).ready(function(){var t=document.getElementById("slider-water"),e=$(t).prop("max");$(t).siblings(".count").text($(t).val()+" mm").css({left:$(t).val()*(100/e)+"%",transform:"translateX(-"+$(t).val()*(100/e)+"%)"}),$(t).siblings(".fill").css("width",$(t).val()*(100/e)+"%"),t.oninput=function(){var t=JSON.parse($("#predicted-data").val());t.wateravailability=this.value;var a=JSON.stringify(t);$("#predicted-data").text(a),$(this).siblings(".count").text(this.value+" mm").css({left:this.value*(100/e)+"%",transform:"translateX(-"+this.value*(100/e)+"%)"}),$(this).siblings(".fill").css("width",this.value*(100/e)+"%"),console.log(this.value)};var a=document.getElementById("slider-carbon"),i=$(a).prop("max");$(a).siblings(".count").text($(a).val()+" g").css({left:$(a).val()*(100/i)+"%",transform:"translateX(-"+$(a).val()*(100/i)+"%)"}),$(a).siblings(".fill").css("width",$(a).val()*(100/i)+"%"),a.oninput=function(){var t=JSON.parse($("#predicted-data").val());t.soilcarbon=this.value;var e=JSON.stringify(t);$("#predicted-data").text(e),$(this).siblings(".count").text(this.value+" g").css({left:this.value*(100/i)+"%",transform:"translateX(-"+this.value*(100/i)+"%)"}),$(this).siblings(".fill").css("width",this.value*(100/i)+"%")};var s=document.getElementById("slider-soil"),o={1:"Poor",2:"Average",3:"Good",4:"Great"},l=$(s).prop("max");$(s).siblings(".count").text(o[$(s).val()]).css({left:$(s).val()*(100/l)+"%",transform:"translateX(-"+$(s).val()*(100/l)+"%)"}),$(s).siblings(".fill").css("width",$(s).val()*(100/l)+"%"),s.oninput=function(){var t=JSON.parse($("#predicted-data").val());t.soilquality=this.value;var e=JSON.stringify(t);$("#predicted-data").text(e),$(this).siblings(".count").text(o[this.value]).css({left:this.value*(100/l)+"%",transform:"translateX(-"+this.value*(100/l)+"%)"}),$(this).siblings(".fill").css("width",this.value*(100/l)+"%")},$("#round-temperature").roundSlider({radius:150,width:40,circleShape:"half-top",sliderType:"min-range",value:50,min:0,max:100,editableTooltip:!1,tooltipFormat:r}),$("#round-vegetation").roundSlider({radius:150,width:40,circleShape:"half-top",sliderType:"min-range",value:0,min:-100,max:100,editableTooltip:!1,tooltipFormat:n}),$("#round-temperature").on("change",function(){var t=JSON.parse($("#predicted-data").val());t.temperature=$(this).find("input").val();var e=JSON.stringify(t);$("#predicted-data").text(e)}),$("#round-vegetation").on("change",function(){var t=JSON.parse($("#predicted-data").val());t.vegetation=$(this).find("input").val()/100;var e=JSON.stringify(t);$("#predicted-data").text(e)}),$(".map-tab-btn").on("click",function(){var t=$(this);$(".map-tab-btn").each(function(){$(this).removeClass("active")}),t.addClass("active")}),$("button").on("click",function(){var t=$(this);t.hasClass("btn-active")?t.removeClass("btn-active"):(t.parents(".btn-js-group").find(".btn-active").removeClass("btn-active"),t.addClass("btn-active"))})}),$("#slider-water").focusout(function(){!function(){var t=$("#predicted-data").val();$.ajax({url:"/api/updateData/",type:"POST",data:t,headers:{"Content-Type":"application/json"},success:function(t){console.log("predicted data updated"),$("#predicted-yield").text(t)}})}()})}]);
//# sourceMappingURL=main.bundle.js.map